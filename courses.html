<body>
  <div id="courses"></div>

  <script>
    fetch("https://dsa-system-design-course-website.onrender.com/api/student-courses", {
      credentials: "include" // send the auth cookie
    })
    .then(res => {
      if (res.status === 401) {
        window.location.href = "https://bipinkumar.me"; // fallback login
      }
      return res.json();
    })
    .then(data => {
      const container = document.getElementById("courses");
      data.courses.forEach(course => {
        const div = document.createElement("div");
        div.innerHTML = `
          <h2>${course.name}</h2>
          <video src="${course.videoUrl}" controls width="600"></video>
        `;
        container.appendChild(div);
      });
    })
    .catch(err => console.error(err));
  </script>
</body>
