<h2>Student Dashboard</h2>
<p>Welcome! Only paid students can access your magic link to watch course recordings.</p>
<div class="student-dashboard-card">
  <input type="email" id="studentEmail" placeholder="Enter your email" />
  <button id="getMagicLinkBtn">Get Magic Link</button>
  <div id="loginStatus"></div>
</div>

<script>
  const emailInput = document.getElementById('studentEmail');
  const loginStatus = document.getElementById('loginStatus');
  const getMagicLinkBtn = document.getElementById('getMagicLinkBtn');

  getMagicLinkBtn.addEventListener('click', async () => {
    const email = emailInput.value.trim();
    if(!email){ loginStatus.style.color='red'; loginStatus.innerText='Please enter your email'; return; }

    loginStatus.style.color='black';
    loginStatus.innerText='Sending magic link...';

    try{
      const res = await fetch('https://dsa-system-design-course-website.onrender.com/auth/login',{
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify({email})
      });
      const data = await res.json();
      if(res.ok){ loginStatus.style.color='green'; loginStatus.innerText='✅ Magic link sent! Check your email.'; }
      else{ loginStatus.style.color='red'; loginStatus.innerText=`❌ ${data.error}`; }
    } catch(err){ console.error(err); loginStatus.style.color='red'; loginStatus.innerText='❌ Failed to send magic link.'; }
  });
</script>
